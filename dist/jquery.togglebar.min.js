/*
* jqToggleBar - jQuery plugin for creating styled radio and toggle bars
*
* Version: 0.0.1
* Build: 20
* Copyright 2011 Alex Tkachev
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: 12/10/2011 13:21:12
*/

(function(a){a.fn.toggleBar=function(b){if(b=="api")return this.data("toggleBar");if(b=="destroy")this.data("toggleBar").destroy(),this.removeData("toggleBar");else return this.each(function(){var c=a(this);if(a.type(b)==="object"){var d=a.fn.toggleBar.classes.ToggleBar;c.data("toggleBar",new d(c,a.extend(!0,{},a.fn.toggleBar.defaults,d.defaults||{},b,{rtl:c.css("direction")=="rtl"})))}})},a.fn.toggleBar.classes={},a.fn.toggleBar.defaults={radio:!1,events:{},selectors:{button:".bar_button"}}})(jQuery),function(a){var b=function(){this.initialize.apply(this,arguments)};a.extend(b.prototype,{initialize:function(b,c){this.options=c,this.el=b,this.items=a(c.selectors.button,this.el),this._initClasses(),this._initEvents()},getItems:function(){return this.items},isSelected:function(a){return a.hasClass("selected")},hasSelected:function(){return this.getSelected().length>0},getSelected:function(){return this.getItems().filter(".selected")},getSelectedValue:function(){var a=this.getSelected();return a.first()?a.first().data("value"):null},getSelectionHash:function(b){var c=this;b=a.extend({},{keyFunc:function(a){return a.data("value")},valueFunc:function(a){return c.isSelected(a)}},b||{});var d={};this.items.each(function(){var c=a(this);d[b.keyFunc(c)]=b.valueFunc(c)});return d},changeItemsSelection:function(b){var c=!1;this.items.each(function(){var d=b(a(this));d!=a(this).hasClass("selected")&&(c=!0),a(this).toggleClass("selected",d)}),c&&this.el.trigger("selectionChanged")},selectItemAt:function(a){if(a>=0&&a<this.items.length){var b=this.items.eq(a);if(this.options.radio){if(b.hasClass("selected"))return;this.items.removeClass("selected")}b.toggleClass("selected"),this.el.trigger("selectionChanged")}},_initClasses:function(){this.el.addClass("togglebar").toggleClass("rtl",this.options.rtl),this.items.first().addClass("first"),this.items.last().addClass("last")},_initEvents:function(){var b=this;this.items.click(function(){b.selectItemAt(a(this).index())})}}),b.defaults={},a.fn.toggleBar.classes.ToggleBar=b}(jQuery)