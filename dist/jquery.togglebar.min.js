/*
* jqToggleBar - jQuery plugin for creating styled radio and toggle bars
*
* Version: 0.0.1
* Build: 37
* Copyright 2011 Alex Tkachev
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: 19 Dec 2011 20:14:39
*/

(function(a){a.fn.toggleBar=function(b){if(b=="api")return this.data("toggleBar");if(b=="destroy")this.data("toggleBar").destroy(),this.removeData("toggleBar");else return this.each(function(){var c=a(this);if(a.type(b)==="object"){var d=a.fn.toggleBar.classes.ToggleBar;c.data("toggleBar",new d(c,a.extend(!0,{},a.fn.toggleBar.defaults,d.defaults||{},b,{rtl:c.css("direction")=="rtl"})))}})},a.fn.toggleBar.classes={},a.fn.toggleBar.defaults={radio:!1,events:{},selectors:{button:".bar_button"}}})(jQuery),function(a){var b=function(){this.initialize.apply(this,arguments)};a.extend(b.prototype,{initialize:function(b,c){this.options=c,this.el=b,this.selectors={inputs:"input:"+(c.radio?"radio":"checkbox")},this.items=a(c.selectors.button,this.el),this._initClasses(),this._initEvents()},changeInputsSelection:function(b){var c=this,d=!1;this.inputs().each(function(){var e=a(this),f=b(e);f!=c.isInputSelected(e)&&(d=!0),f?e.attr("checked","checked"):e.removeAttr("checked"),c._syncLabelSelection(e)}),d&&this.el.trigger("selectionChanged")},name:function(){return this.inputs().first().attr("name")},inputs:function(){return this.el.find(this.selectors.inputs)},selectedInputs:function(){return this.inputs().filter(":checked")},hasSelected:function(){return this.selectedInputs().length>0},labelFor:function(a){var b=a.attr("id");return this.el.find("label[for="+b+"]")},isInputSelected:function(a){return a.is(":checked")},selectedValue:function(a){if(arguments.length==0){var b=this.selectedInputs();return b.length>0?b.first().val():null}var c=this.inputs().filter("[value="+a+"]");if(c.length==0)throw"No input found with value: "+a;c.attr("checked","checked"),this._onInputSelectionChanged();return this},selectionHash:function(b){var c=this;b=a.extend({},{keyFunc:function(a){return a.val()},valueFunc:function(a){return c.isInputSelected(a)}},b||{});var d={};this.inputs().each(function(){var c=a(this);d[b.keyFunc(c)]=b.valueFunc(c)});return d},_onInputSelectionChanged:function(){var b=this;this.inputs().each(function(){b._syncLabelSelection(a(this))}),this.el.trigger("selectionChanged")},_syncLabelSelection:function(a){var b=this.labelFor(a);b.toggleClass("selected",this.isInputSelected(a))},_initClasses:function(){this.el.addClass("togglebar").toggleClass("rtl",this.options.rtl),this.items.first().addClass("first"),this.items.last().addClass("last");var a=this.inputs();this.labelFor(a.first()).addClass("first"),this.labelFor(a.last()).addClass("last"),this._onInputSelectionChanged()},_initEvents:function(){var b=this;this.items.click(function(){b.selectItemAt(a(this).index())}),this.inputs().change(function(){b._onInputSelectionChanged()})}}),b.defaults={},a.fn.toggleBar.classes.ToggleBar=b}(jQuery)
